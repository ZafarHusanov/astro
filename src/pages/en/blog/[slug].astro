---
import fs from 'fs';
import path from 'path';
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Header from '../../../components/Header.astro';
import en from '../../../i18n/en.json';

// ðŸ”¹ build paytida barcha sluglarni olish
export async function getStaticPaths() {
  const dir = path.resolve('src/content/en');
  const files = fs.readdirSync(dir);

  // har bir .md fayldan slug olish
  return files
    .filter(f => f.endsWith('.md'))
    .map(file => ({
      params: { slug: file.replace('.md', '') },
    }));
}

// ðŸ”¹ slug orqali postni olish
const { slug } = Astro.params;
const postModule = await import(`../../../content/en/${slug}.md`);
const { Content, frontmatter } = postModule;
---

<BaseLayout title={frontmatter.title} lang="en">
  <Header t={en} lang="en" slot="header" />
  <article class="mt-6 prose">
    <h1>{frontmatter.title}</h1>
    
    <h1>{frontmatter.date}</h1>
    <Content />
  </article>
</BaseLayout>
